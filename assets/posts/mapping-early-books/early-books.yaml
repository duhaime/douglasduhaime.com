import:
  - https://s3.amazonaws.com/duhaime/blog/mapping-early-english-books/mapzen-styles/default.yaml

scene:
  background:
    color: black

global:
  fillval: 'publications_1700'

styles:
  water:
    base: polygons
  earth:
    base: polygons
  landuse:
    base: polygons
  _custom_polygons:
    base: polygons

sources:
  _british_shapes:
    type: GeoJSON
    url: https://s3.amazonaws.com/duhaime/blog/mapping-early-english-books/data/british-isles-with-data.geojson

layers:
  _london_shapes:
    data: { source: _british_shapes }
    draw:
      _custom_polygons:
        order: 490
        color: |
          function() {
            // color scale: #dc4632 #e45f4a #eb7661 #f18d7a #f5a293
            if (feature[global.fillval]) {
              var color = feature[global.fillval] < 100 ? '#f5a293' :
                          feature[global.fillval] < 500 ? '#f18d7a' :
                          feature[global.fillval] < 1000 ? '#eb7661' :
                          feature[global.fillval] < 5000 ? '#e45f4a' :
                          '#dc4632'
            } else {
              var color = '#666'
            }
            return color;
          }