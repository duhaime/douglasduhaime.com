import:
  - https://s3.amazonaws.com/duhaime/blog/mapping-early-english-books/mapzen-styles/default.yaml
  - https://s3.amazonaws.com/duhaime/blog/mapping-early-english-books/mapzen-styles/functions/zoom.yaml

scene:
  background:
    color: black

global:
  fillval: 'publications_1700'

styles:
  zoom:
    mix: [functions-zoom]
    shaders:
      defines:
        ZOOM_START: 15.
        ZOOM_END: 18.
  water:
    base: polygons
    mix: [zoom]
  earth:
    base: polygons
    mix: [zoom]
  landuse:
    base: polygons
    mix: [zoom]
  roads:
    base: lines
    mix: [zoom]
    lighting: false
  buildings:
    base: polygons
    mix: [zoom]

sources:
  osm:
    type: MVT
    url:  https://tile.mapzen.com/mapzen/vector/v1/all/{z}/{x}/{y}.mvt
    url_params:
      api_key: vector-tiles-JUsa0Gc
    max_zoom: 16

layers:
  buildings:
    data: { source: osm }
    draw:
      buildings:
        order: global.order
        color: |
          function() {
            return feature.fillval;
          }
        extrude: true
        interactive: true